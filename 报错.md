登录管理员admin用户，进入教师信息管理界面，新增教师，报错：新增失败: 该教师的基础信息已存在，请勿重复添加

新增失败: 新增失败: 该教师的基础信息已存在，请勿重复添加
控制台输出：index.js:269 === 路由守卫调试 ===
index.js:270 目标路径: /admin/teacher-info
index.js:271 用户角色: Array(1)
index.js:272 要求角色: Array(1)
index.js:276 是否有权限: true
index.ts-e02f440a.js:12621 rulesUpdated Object ????
request.js:32 === API Response Debug ===
request.js:33 URL: /auth/info
request.js:34 Response data: Object
TeacherManagement.vue:438 === 获取教师列表参数 ===
TeacherManagement.vue:439 当前用户: Proxy(Object)
TeacherManagement.vue:440 搜索参数: Object
request.js:32 === API Response Debug ===
request.js:33 URL: /teacher-info/basic/list
request.js:34 Response data: Object
TeacherManagement.vue:444 后端返回的PageResult: Object
TeacherManagement.vue:450 教师列表数据: Proxy(Array)
TeacherManagement.vue:451 总数: 5
request.js:32 === API Response Debug ===
request.js:33 URL: /auth/login
request.js:34 Response data: Object
Login.vue:594 登录响应: Object
Login.vue:595 用户角色: Proxy(Array)
Login.vue:596 hasRole(TEACHER): false
index.js:269 === 路由守卫调试 ===
index.js:270 目标路径: /admin/dashboard
index.js:271 用户角色: Array(1)
index.js:272 要求角色: Array(1)
index.js:276 是否有权限: true
request.js:32 === API Response Debug ===
request.js:33 URL: /backend/system/settings
request.js:34 Response data: Object
index.js:269 === 路由守卫调试 ===
index.js:270 目标路径: /admin/teacher-info
index.js:271 用户角色: Array(1)
index.js:272 要求角色: Array(1)
index.js:276 是否有权限: true
TeacherManagement.vue:438 === 获取教师列表参数 ===
TeacherManagement.vue:439 当前用户: Proxy(Object)
TeacherManagement.vue:440 搜索参数: Object
request.js:32 === API Response Debug ===
request.js:33 URL: /teacher-info/basic/list
request.js:34 Response data: Object
TeacherManagement.vue:444 后端返回的PageResult: Object
TeacherManagement.vue:450 教师列表数据: Proxy(Array)
TeacherManagement.vue:451 总数: 5
TeacherManagement.vue:566 === 提交教师数据 ===
TeacherManagement.vue:567 提交数据: Object
TeacherManagement.vue:568 当前用户: Proxy(Object)
request.js:32 === API Response Debug ===
request.js:33 URL: /teacher-info/basic/add
request.js:34 Response data: Object
request.js:38  API Error - Code: 500 Message: 新增失败: 该教师的基础信息已存在，请勿重复添加
service.interceptors.response.use.message @ request.js:38
TeacherManagement.vue:580  提交失败: Error: 新增失败: 该教师的基础信息已存在，请勿重复添加
    at service.interceptors.response.use.message (request.js:40:29)
    at async Axios.request (axios.js?v=fa7cff65:2232:14)
    at async TeacherManagement.vue:571:1
    at async validateField (chunk-WZAVD5DJ.js?v=fa7cff65:34936:11)
    at async handleSubmit (TeacherManagement.vue:557:1)
(匿名) @ TeacherManagement.vue:580
TeacherManagement.vue:566 === 提交教师数据 ===
TeacherManagement.vue:567 提交数据: Object
TeacherManagement.vue:568 当前用户: Proxy(Object)
request.js:32 === API Response Debug ===
request.js:33 URL: /teacher-info/basic/add
request.js:34 Response data: Object
request.js:38  API Error - Code: 500 Message: 新增失败: 该教师的基础信息已存在，请勿重复添加
service.interceptors.response.use.message @ request.js:38
TeacherManagement.vue:580  提交失败: Error: 新增失败: 该教师的基础信息已存在，请勿重复添加
    at service.interceptors.response.use.message (request.js:40:29)
    at async Axios.request (axios.js?v=fa7cff65:2232:14)
    at async TeacherManagement.vue:571:1
    at async validateField (chunk-WZAVD5DJ.js?v=fa7cff65:34936:11)
    at async handleSubmit (TeacherManagement.vue:557:1)
(匿名) @ TeacherManagement.vue:580
client.ts:110 [vite] server connection lost. polling for restart...
 后台输出：2026-01-10T19:30:02.062+08:00  INFO 20924 --- [nio-8081-exec-1] o.a.c.c.C.[.[localhost].[/api/v1]        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-10T19:30:02.064+08:00  INFO 20924 --- [nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-10T19:30:02.068+08:00  INFO 20924 --- [nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2026-01-10T19:30:02.114+08:00 DEBUG 20924 --- [nio-8081-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /auth/info
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9a00235] was not registered for synchronization because synchronization is not active
2026-01-10T19:30:02.216+08:00  INFO 20924 --- [nio-8081-exec-1] com.zaxxer.hikari.HikariDataSource       : EducationPlatformHikariCP - Starting...
2026-01-10T19:30:02.450+08:00  INFO 20924 --- [nio-8081-exec-1] com.zaxxer.hikari.pool.HikariPool        : EducationPlatformHikariCP - Added connection com.mysql.jdbc.JDBC4Connection@6d7b5d00
2026-01-10T19:30:02.453+08:00  INFO 20924 --- [nio-8081-exec-1] com.zaxxer.hikari.HikariDataSource       : EducationPlatformHikariCP - Start completed.
JDBC Connection [HikariProxyConnection@1113081914 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT * FROM user WHERE username = ? AND status = 1 AND deleted = 0
==> Parameters: admin(String)
<==    Columns: id, username, password, real_name, id_card, phone, email, avatar, gender, birth_date, school_id, department, title, status, last_login_time, last_login_ip, deleted, created_at, updated_at, class_id
<==        Row: 1, admin, $2a$10$0FbH16apzWwgCl5/S6.FBezzcCMOkAuOkkTQk1JKo4vs02jztBsIq, 系统管理员, null, 13800138000, admin@education.com, null, null, null, null, null, null, 1, 2026-01-10 19:22:19.0, null, 0, 2026-01-09 09:59:28.0, 2026-01-09 09:59:28.0, null
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9a00235]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cf14d6b] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1845369668 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT r.role_code FROM role r INNER JOIN user_role ur ON r.id = ur.role_id WHERE ur.user_id = ?
==> Parameters: 1(Long)
<==    Columns: role_code
<==        Row: ADMIN
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cf14d6b]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@418030a5] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1724485304 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT DISTINCT p.permission_code FROM permission p INNER JOIN role_permission rp ON p.id = rp.permission_id INNER JOIN user_role ur ON rp.role_id = ur.role_id WHERE ur.user_id = ? AND p.status = 1
==> Parameters: 1(Long)
<==      Total: 0
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@418030a5]
2026-01-10T19:30:02.604+08:00 DEBUG 20924 --- [nio-8081-exec-1] c.e.p.security.JwtAuthenticationFilter   : 用户 admin 认证成功
2026-01-10T19:30:02.608+08:00 DEBUG 20924 --- [nio-8081-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /auth/info
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bebf060] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1239321217 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT * FROM user WHERE username = ? AND status = 1 AND deleted = 0
==> Parameters: admin(String)
<==    Columns: id, username, password, real_name, id_card, phone, email, avatar, gender, birth_date, school_id, department, title, status, last_login_time, last_login_ip, deleted, created_at, updated_at, class_id
<==        Row: 1, admin, $2a$10$0FbH16apzWwgCl5/S6.FBezzcCMOkAuOkkTQk1JKo4vs02jztBsIq, 系统管理员, null, 13800138000, admin@education.com, null, null, null, null, null, null, 1, 2026-01-10 19:22:19.0, null, 0, 2026-01-09 09:59:28.0, 2026-01-09 09:59:28.0, null
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bebf060]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16911fa1] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1707313187 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT id,username,password,real_name,id_card,phone,email,avatar,gender,birth_date,school_id,class_id,department,title,status,last_login_time,last_login_ip,deleted,created_at,updated_at FROM user WHERE id=? AND deleted=0
==> Parameters: 1(Long)
<==    Columns: id, username, password, real_name, id_card, phone, email, avatar, gender, birth_date, school_id, class_id, department, title, status, last_login_time, last_login_ip, deleted, created_at, updated_at
<==        Row: 1, admin, $2a$10$0FbH16apzWwgCl5/S6.FBezzcCMOkAuOkkTQk1JKo4vs02jztBsIq, 系统管理员, null, 13800138000, admin@education.com, null, null, null, null, null, null, null, 1, 2026-01-10 19:22:19.0, null, 0, 2026-01-09 09:59:28.0, 2026-01-09 09:59:28.0
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16911fa1]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1db4c25] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@531179432 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT r.role_code FROM role r INNER JOIN user_role ur ON r.id = ur.role_id WHERE ur.user_id = ?
==> Parameters: 1(Long)
<==    Columns: role_code
<==        Row: ADMIN
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1db4c25]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26590f6d] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@882327304 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT DISTINCT p.permission_code FROM permission p INNER JOIN role_permission rp ON p.id = rp.permission_id INNER JOIN user_role ur ON rp.role_id = ur.role_id WHERE ur.user_id = ? AND p.status = 1
==> Parameters: 1(Long)
<==      Total: 0
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26590f6d]
2026-01-10T19:30:02.769+08:00 DEBUG 20924 --- [nio-8081-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /teacher-info/basic/list?current=1&size=10
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56b119d9] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@380069147 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT * FROM user WHERE username = ? AND status = 1 AND deleted = 0
==> Parameters: admin(String)
<==    Columns: id, username, password, real_name, id_card, phone, email, avatar, gender, birth_date, school_id, department, title, status, last_login_time, last_login_ip, deleted, created_at, updated_at, class_id
<==        Row: 1, admin, $2a$10$0FbH16apzWwgCl5/S6.FBezzcCMOkAuOkkTQk1JKo4vs02jztBsIq, 系统管理员, null, 13800138000, admin@education.com, null, null, null, null, null, null, 1, 2026-01-10 19:22:19.0, null, 0, 2026-01-09 09:59:28.0, 2026-01-09 09:59:28.0, null
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56b119d9]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b17f105] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@2032249723 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT r.role_code FROM role r INNER JOIN user_role ur ON r.id = ur.role_id WHERE ur.user_id = ?
==> Parameters: 1(Long)
<==    Columns: role_code
<==        Row: ADMIN
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b17f105]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53c370a7] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@225430385 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT DISTINCT p.permission_code FROM permission p INNER JOIN role_permission rp ON p.id = rp.permission_id INNER JOIN user_role ur ON rp.role_id = ur.role_id WHERE ur.user_id = ? AND p.status = 1
==> Parameters: 1(Long)
<==      Total: 0
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53c370a7]
2026-01-10T19:30:02.799+08:00 DEBUG 20924 --- [nio-8081-exec-2] c.e.p.security.JwtAuthenticationFilter   : 用户 admin 认证成功
2026-01-10T19:30:02.800+08:00 DEBUG 20924 --- [nio-8081-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /teacher-info/basic/list?current=1&size=10
2026-01-10T19:30:02.813+08:00 DEBUG 20924 --- [nio-8081-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.education.platform.common.ApiResult com.education.platform.controller.TeacherInfoController.listBasicInfo(java.lang.Long,java.lang.String,java.lang.Long,java.lang.Long); target is of class [com.education.platform.controller.TeacherInfoController]
2026-01-10T19:30:02.830+08:00 DEBUG 20924 --- [nio-8081-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.education.platform.common.ApiResult com.education.platform.controller.TeacherInfoController.listBasicInfo(java.lang.Long,java.lang.String,java.lang.Long,java.lang.Long); target is of class [com.education.platform.controller.TeacherInfoController]
2026-01-10T19:30:02.830+08:00  INFO 20924 --- [nio-8081-exec-2] c.e.p.controller.TeacherInfoController   : === 教师列表查询开始 ===
2026-01-10T19:30:02.831+08:00  INFO 20924 --- [nio-8081-exec-2] c.e.p.controller.TeacherInfoController   : 请求参数: schoolId=null, keyword=null, current=1, size=10
2026-01-10T19:30:02.846+08:00  INFO 20924 --- [nio-8081-exec-2] c.e.p.controller.TeacherInfoController   : schoolId为null，不添加学校过滤条件
2026-01-10T19:30:02.852+08:00  INFO 20924 --- [nio-8081-exec-2] c.e.p.controller.TeacherInfoController   : 生成的SQL条件: WHERE (deleted = #{ew.paramNameValuePairs.MPGENVAL1}) ORDER BY created_at DESC
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e441759] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@387435 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT COUNT(*) AS total FROM teacher_basic WHERE deleted = 0 AND (deleted = ?)
==> Parameters: 0(Integer)
<==    Columns: total
<==        Row: 5
<==      Total: 1
==>  Preparing: SELECT id,user_id,teacher_id,teacher_name,teacher_number,gender,birth_date,ethnicity,native_place,id_card,phone,email,address,school_id,department,position,title,hire_date,status,photo_url,work_photo_url,signature_url,role_type,remarks,deleted,created_at,updated_at FROM teacher_basic WHERE deleted=0 AND (deleted = ?) ORDER BY created_at DESC LIMIT ?
==> Parameters: 0(Integer), 10(Long)
<==    Columns: id, user_id, teacher_id, teacher_name, teacher_number, gender, birth_date, ethnicity, native_place, id_card, phone, email, address, school_id, department, position, title, hire_date, status, photo_url, work_photo_url, signature_url, role_type, remarks, deleted, created_at, updated_at
<==        Row: 14, 15, 13, 王, T15, null, null, null, null, null, 19999999999, , null, null, 信息学院, null, 高级教师, null, 1, null, null, null, null, null, 0, 2026-01-10 19:22:43.0, 2026-01-10 19:22:43.0
<==        Row: 12, 14, 12, cs03, T14, male, null, null, null, , 19988453613, 123@qq.com, null, 6, 数学教研组, 教师, 高级教师, null, 1, null, null, null, null, , 0, 2026-01-10 18:18:47.0, 2026-01-10 18:18:47.0
<==        Row: 4, 4, 2, 崔宇杭, T002, null, null, null, null, null, null, null, null, null, 1, null, 1, null, 1, null, null, null, null, null, 0, 2026-01-10 16:24:58.0, 2026-01-10 16:24:58.0
<==        Row: 5, 5, 5, 李, T001, null, null, null, null, null, null, null, null, 3, 信息学院, null, 高级教师, null, 1, null, null, null, null, null, 0, 2026-01-10 16:24:58.0, 2026-01-10 16:24:58.0
<==        Row: 6, 8, 8, 王老师, T003, null, null, null, null, null, null, null, null, null, null, null, null, null, 1, null, null, null, null, null, 0, 2026-01-10 16:24:58.0, 2026-01-10 16:24:58.0
<==      Total: 5
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e441759]
2026-01-10T19:30:03.029+08:00  INFO 20924 --- [nio-8081-exec-2] c.e.p.controller.TeacherInfoController   : 查询结果: 总数=5, 当前页数据量=5
2026-01-10T19:30:03.030+08:00  INFO 20924 --- [nio-8081-exec-2] c.e.p.controller.TeacherInfoController   : 当前页数据: [TeacherBasic(userId=15, teacherId=13, teacherName=王, teacherNumber=T15, gender=null, birthDate=null, ethnicity=null, nativePlace=null, idCard=null, phone=19999999999, email=, address=null, schoolId=null, department=信息学院, position=null, title=高级教师, hireDate=null, status=1, photoUrl=null, workPhotoUrl=null, signatureUrl=null, roleType=null, remarks=null, deleted=0), TeacherBasic(userId=14, teacherId=12, teacherName=cs03, teacherNumber=T14, gender=male, birthDate=null, ethnicity=null, nativePlace=null, idCard=, phone=19988453613, email=123@qq.com, address=null, schoolId=6, department=数学教研组, position=教师, title=高级教师, hireDate=null, status=1, photoUrl=null, workPhotoUrl=null, signatureUrl=null, roleType=null, remarks=, deleted=0), TeacherBasic(userId=4, teacherId=2, teacherName=崔宇杭, teacherNumber=T002, gender=null, birthDate=null, ethnicity=null, nativePlace=null, idCard=null, phone=null, email=null, address=null, schoolId=null, department=1, position=null, title=1, hireDate=null, status=1, photoUrl=null, workPhotoUrl=null, signatureUrl=null, roleType=null, remarks=null, deleted=0), TeacherBasic(userId=5, teacherId=5, teacherName=李, teacherNumber=T001, gender=null, birthDate=null, ethnicity=null, nativePlace=null, idCard=null, phone=null, email=null, address=null, schoolId=3, department=信息学院, position=null, title=高级教师, hireDate=null, status=1, photoUrl=null, workPhotoUrl=null, signatureUrl=null, roleType=null, remarks=null, deleted=0), TeacherBasic(userId=8, teacherId=8, teacherName=王老师, teacherNumber=T003, gender=null, birthDate=null, ethnicity=null, nativePlace=null, idCard=null, phone=null, email=null, address=null, schoolId=null, department=null, position=null, title=null, hireDate=null, status=1, photoUrl=null, workPhotoUrl=null, signatureUrl=null, roleType=null, remarks=null, deleted=0)]
2026-01-10T19:30:04.507+08:00 DEBUG 20924 --- [nio-8081-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /auth/login
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f22cef] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@2103733032 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT * FROM user WHERE username = ? AND status = 1 AND deleted = 0
==> Parameters: admin(String)
<==    Columns: id, username, password, real_name, id_card, phone, email, avatar, gender, birth_date, school_id, department, title, status, last_login_time, last_login_ip, deleted, created_at, updated_at, class_id
<==        Row: 1, admin, $2a$10$0FbH16apzWwgCl5/S6.FBezzcCMOkAuOkkTQk1JKo4vs02jztBsIq, 系统管理员, null, 13800138000, admin@education.com, null, null, null, null, null, null, 1, 2026-01-10 19:22:19.0, null, 0, 2026-01-09 09:59:28.0, 2026-01-09 09:59:28.0, null
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f22cef]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@216c752e] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1601985554 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT r.role_code FROM role r INNER JOIN user_role ur ON r.id = ur.role_id WHERE ur.user_id = ?
==> Parameters: 1(Long)
<==    Columns: role_code
<==        Row: ADMIN
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@216c752e]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b29dfc7] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@154015369 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT DISTINCT p.permission_code FROM permission p INNER JOIN role_permission rp ON p.id = rp.permission_id INNER JOIN user_role ur ON rp.role_id = ur.role_id WHERE ur.user_id = ? AND p.status = 1
==> Parameters: 1(Long)
<==      Total: 0
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b29dfc7]
2026-01-10T19:30:04.538+08:00 DEBUG 20924 --- [nio-8081-exec-3] c.e.p.security.JwtAuthenticationFilter   : 用户 admin 认证成功
2026-01-10T19:30:04.538+08:00 DEBUG 20924 --- [nio-8081-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /auth/login
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@525052ba] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1951409981 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT * FROM user WHERE username = ? AND status = 1 AND deleted = 0
==> Parameters: admin(String)
<==    Columns: id, username, password, real_name, id_card, phone, email, avatar, gender, birth_date, school_id, department, title, status, last_login_time, last_login_ip, deleted, created_at, updated_at, class_id
<==        Row: 1, admin, $2a$10$0FbH16apzWwgCl5/S6.FBezzcCMOkAuOkkTQk1JKo4vs02jztBsIq, 系统管理员, null, 13800138000, admin@education.com, null, null, null, null, null, null, 1, 2026-01-10 19:22:19.0, null, 0, 2026-01-09 09:59:28.0, 2026-01-09 09:59:28.0, null
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@525052ba]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1969eb75] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1865547575 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: UPDATE user SET username=?, password=?, real_name=?, phone=?, email=?, status=?, last_login_time=?, created_at=?, updated_at=? WHERE id=? AND deleted=0
==> Parameters: admin(String), $2a$10$0FbH16apzWwgCl5/S6.FBezzcCMOkAuOkkTQk1JKo4vs02jztBsIq(String), 系统管理员(String), 13800138000(String), admin@education.com(String), 1(Integer), 2026-01-10T19:30:04.771586600(LocalDateTime), 2026-01-09T09:59:28(LocalDateTime), 2026-01-09T09:59:28(LocalDateTime), 1(Long)
<==    Updates: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1969eb75]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14d388db] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1215637599 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT r.role_code FROM role r INNER JOIN user_role ur ON r.id = ur.role_id WHERE ur.user_id = ?
==> Parameters: 1(Long)
<==    Columns: role_code
<==        Row: ADMIN
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14d388db]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a657be9] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@309902638 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT DISTINCT p.permission_code FROM permission p INNER JOIN role_permission rp ON p.id = rp.permission_id INNER JOIN user_role ur ON rp.role_id = ur.role_id WHERE ur.user_id = ? AND p.status = 1
==> Parameters: 1(Long)
<==      Total: 0
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a657be9]
=== 用户 admin 登录，角色: [ADMIN]，权限: []
2026-01-10T19:30:04.807+08:00  INFO 20924 --- [nio-8081-exec-3] c.e.p.service.impl.UserServiceImpl       : 用户 admin 登录成功
2026-01-10T19:30:04.919+08:00 DEBUG 20924 --- [nio-8081-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /backend/system/settings
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3025f14c] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1225513442 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT * FROM user WHERE username = ? AND status = 1 AND deleted = 0
==> Parameters: admin(String)
<==    Columns: id, username, password, real_name, id_card, phone, email, avatar, gender, birth_date, school_id, department, title, status, last_login_time, last_login_ip, deleted, created_at, updated_at, class_id
<==        Row: 1, admin, $2a$10$0FbH16apzWwgCl5/S6.FBezzcCMOkAuOkkTQk1JKo4vs02jztBsIq, 系统管理员, null, 13800138000, admin@education.com, null, null, null, null, null, null, 1, 2026-01-10 19:30:05.0, null, 0, 2026-01-09 09:59:28.0, 2026-01-09 09:59:28.0, null
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3025f14c]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7162a54f] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1850901950 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT r.role_code FROM role r INNER JOIN user_role ur ON r.id = ur.role_id WHERE ur.user_id = ?
==> Parameters: 1(Long)
<==    Columns: role_code
<==        Row: ADMIN
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7162a54f]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60434829] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@82821555 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT DISTINCT p.permission_code FROM permission p INNER JOIN role_permission rp ON p.id = rp.permission_id INNER JOIN user_role ur ON rp.role_id = ur.role_id WHERE ur.user_id = ? AND p.status = 1
==> Parameters: 1(Long)
<==      Total: 0
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60434829]
2026-01-10T19:30:04.934+08:00 DEBUG 20924 --- [nio-8081-exec-4] c.e.p.security.JwtAuthenticationFilter   : 用户 admin 认证成功
2026-01-10T19:30:04.935+08:00 DEBUG 20924 --- [nio-8081-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /backend/system/settings
2026-01-10T19:30:04.936+08:00 DEBUG 20924 --- [nio-8081-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.education.platform.common.ApiResult com.education.platform.controller.BackendController.getSystemSettings(); target is of class [com.education.platform.controller.BackendController]
2026-01-10T19:30:04.937+08:00 DEBUG 20924 --- [nio-8081-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.education.platform.common.ApiResult com.education.platform.controller.BackendController.getSystemSettings(); target is of class [com.education.platform.controller.BackendController]
2026-01-10T19:30:05.869+08:00 DEBUG 20924 --- [nio-8081-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /teacher-info/basic/list?current=1&size=10
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27cdf6cc] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@520646222 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT * FROM user WHERE username = ? AND status = 1 AND deleted = 0
==> Parameters: admin(String)
<==    Columns: id, username, password, real_name, id_card, phone, email, avatar, gender, birth_date, school_id, department, title, status, last_login_time, last_login_ip, deleted, created_at, updated_at, class_id
<==        Row: 1, admin, $2a$10$0FbH16apzWwgCl5/S6.FBezzcCMOkAuOkkTQk1JKo4vs02jztBsIq, 系统管理员, null, 13800138000, admin@education.com, null, null, null, null, null, null, 1, 2026-01-10 19:30:05.0, null, 0, 2026-01-09 09:59:28.0, 2026-01-09 09:59:28.0, null
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27cdf6cc]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fabf848] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@750580422 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT r.role_code FROM role r INNER JOIN user_role ur ON r.id = ur.role_id WHERE ur.user_id = ?
==> Parameters: 1(Long)
<==    Columns: role_code
<==        Row: ADMIN
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fabf848]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ca24c05] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1208240139 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT DISTINCT p.permission_code FROM permission p INNER JOIN role_permission rp ON p.id = rp.permission_id INNER JOIN user_role ur ON rp.role_id = ur.role_id WHERE ur.user_id = ? AND p.status = 1
==> Parameters: 1(Long)
<==      Total: 0
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ca24c05]
2026-01-10T19:30:05.888+08:00 DEBUG 20924 --- [nio-8081-exec-5] c.e.p.security.JwtAuthenticationFilter   : 用户 admin 认证成功
2026-01-10T19:30:05.889+08:00 DEBUG 20924 --- [nio-8081-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /teacher-info/basic/list?current=1&size=10
2026-01-10T19:30:05.892+08:00 DEBUG 20924 --- [nio-8081-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.education.platform.common.ApiResult com.education.platform.controller.TeacherInfoController.listBasicInfo(java.lang.Long,java.lang.String,java.lang.Long,java.lang.Long); target is of class [com.education.platform.controller.TeacherInfoController]
2026-01-10T19:30:05.893+08:00 DEBUG 20924 --- [nio-8081-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.education.platform.common.ApiResult com.education.platform.controller.TeacherInfoController.listBasicInfo(java.lang.Long,java.lang.String,java.lang.Long,java.lang.Long); target is of class [com.education.platform.controller.TeacherInfoController]
2026-01-10T19:30:05.893+08:00  INFO 20924 --- [nio-8081-exec-5] c.e.p.controller.TeacherInfoController   : === 教师列表查询开始 ===
2026-01-10T19:30:05.893+08:00  INFO 20924 --- [nio-8081-exec-5] c.e.p.controller.TeacherInfoController   : 请求参数: schoolId=null, keyword=null, current=1, size=10
2026-01-10T19:30:05.894+08:00  INFO 20924 --- [nio-8081-exec-5] c.e.p.controller.TeacherInfoController   : schoolId为null，不添加学校过滤条件
2026-01-10T19:30:05.894+08:00  INFO 20924 --- [nio-8081-exec-5] c.e.p.controller.TeacherInfoController   : 生成的SQL条件: WHERE (deleted = #{ew.paramNameValuePairs.MPGENVAL1}) ORDER BY created_at DESC
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@464b3a25] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@494154881 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT COUNT(*) AS total FROM teacher_basic WHERE deleted = 0 AND (deleted = ?)
==> Parameters: 0(Integer)
<==    Columns: total
<==        Row: 5
<==      Total: 1
==>  Preparing: SELECT id,user_id,teacher_id,teacher_name,teacher_number,gender,birth_date,ethnicity,native_place,id_card,phone,email,address,school_id,department,position,title,hire_date,status,photo_url,work_photo_url,signature_url,role_type,remarks,deleted,created_at,updated_at FROM teacher_basic WHERE deleted=0 AND (deleted = ?) ORDER BY created_at DESC LIMIT ?
==> Parameters: 0(Integer), 10(Long)
<==    Columns: id, user_id, teacher_id, teacher_name, teacher_number, gender, birth_date, ethnicity, native_place, id_card, phone, email, address, school_id, department, position, title, hire_date, status, photo_url, work_photo_url, signature_url, role_type, remarks, deleted, created_at, updated_at
<==        Row: 14, 15, 13, 王, T15, null, null, null, null, null, 19999999999, , null, null, 信息学院, null, 高级教师, null, 1, null, null, null, null, null, 0, 2026-01-10 19:22:43.0, 2026-01-10 19:22:43.0
<==        Row: 12, 14, 12, cs03, T14, male, null, null, null, , 19988453613, 123@qq.com, null, 6, 数学教研组, 教师, 高级教师, null, 1, null, null, null, null, , 0, 2026-01-10 18:18:47.0, 2026-01-10 18:18:47.0
<==        Row: 4, 4, 2, 崔宇杭, T002, null, null, null, null, null, null, null, null, null, 1, null, 1, null, 1, null, null, null, null, null, 0, 2026-01-10 16:24:58.0, 2026-01-10 16:24:58.0
<==        Row: 5, 5, 5, 李, T001, null, null, null, null, null, null, null, null, 3, 信息学院, null, 高级教师, null, 1, null, null, null, null, null, 0, 2026-01-10 16:24:58.0, 2026-01-10 16:24:58.0
<==        Row: 6, 8, 8, 王老师, T003, null, null, null, null, null, null, null, null, null, null, null, null, null, 1, null, null, null, null, null, 0, 2026-01-10 16:24:58.0, 2026-01-10 16:24:58.0
<==      Total: 5
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@464b3a25]
2026-01-10T19:30:05.924+08:00  INFO 20924 --- [nio-8081-exec-5] c.e.p.controller.TeacherInfoController   : 查询结果: 总数=5, 当前页数据量=5
2026-01-10T19:30:05.925+08:00  INFO 20924 --- [nio-8081-exec-5] c.e.p.controller.TeacherInfoController   : 当前页数据: [TeacherBasic(userId=15, teacherId=13, teacherName=王, teacherNumber=T15, gender=null, birthDate=null, ethnicity=null, nativePlace=null, idCard=null, phone=19999999999, email=, address=null, schoolId=null, department=信息学院, position=null, title=高级教师, hireDate=null, status=1, photoUrl=null, workPhotoUrl=null, signatureUrl=null, roleType=null, remarks=null, deleted=0), TeacherBasic(userId=14, teacherId=12, teacherName=cs03, teacherNumber=T14, gender=male, birthDate=null, ethnicity=null, nativePlace=null, idCard=, phone=19988453613, email=123@qq.com, address=null, schoolId=6, department=数学教研组, position=教师, title=高级教师, hireDate=null, status=1, photoUrl=null, workPhotoUrl=null, signatureUrl=null, roleType=null, remarks=, deleted=0), TeacherBasic(userId=4, teacherId=2, teacherName=崔宇杭, teacherNumber=T002, gender=null, birthDate=null, ethnicity=null, nativePlace=null, idCard=null, phone=null, email=null, address=null, schoolId=null, department=1, position=null, title=1, hireDate=null, status=1, photoUrl=null, workPhotoUrl=null, signatureUrl=null, roleType=null, remarks=null, deleted=0), TeacherBasic(userId=5, teacherId=5, teacherName=李, teacherNumber=T001, gender=null, birthDate=null, ethnicity=null, nativePlace=null, idCard=null, phone=null, email=null, address=null, schoolId=3, department=信息学院, position=null, title=高级教师, hireDate=null, status=1, photoUrl=null, workPhotoUrl=null, signatureUrl=null, roleType=null, remarks=null, deleted=0), TeacherBasic(userId=8, teacherId=8, teacherName=王老师, teacherNumber=T003, gender=null, birthDate=null, ethnicity=null, nativePlace=null, idCard=null, phone=null, email=null, address=null, schoolId=null, department=null, position=null, title=null, hireDate=null, status=1, photoUrl=null, workPhotoUrl=null, signatureUrl=null, roleType=null, remarks=null, deleted=0)]
2026-01-10T19:30:47.218+08:00 DEBUG 20924 --- [nio-8081-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /teacher-info/basic/add
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2867fb55] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1992490087 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT * FROM user WHERE username = ? AND status = 1 AND deleted = 0
==> Parameters: admin(String)
<==    Columns: id, username, password, real_name, id_card, phone, email, avatar, gender, birth_date, school_id, department, title, status, last_login_time, last_login_ip, deleted, created_at, updated_at, class_id
<==        Row: 1, admin, $2a$10$0FbH16apzWwgCl5/S6.FBezzcCMOkAuOkkTQk1JKo4vs02jztBsIq, 系统管理员, null, 13800138000, admin@education.com, null, null, null, null, null, null, 1, 2026-01-10 19:30:05.0, null, 0, 2026-01-09 09:59:28.0, 2026-01-09 09:59:28.0, null
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2867fb55]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52cae0d8] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1304622524 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT r.role_code FROM role r INNER JOIN user_role ur ON r.id = ur.role_id WHERE ur.user_id = ?
==> Parameters: 1(Long)
<==    Columns: role_code
<==        Row: ADMIN
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52cae0d8]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@691459d3] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1818077193 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT DISTINCT p.permission_code FROM permission p INNER JOIN role_permission rp ON p.id = rp.permission_id INNER JOIN user_role ur ON rp.role_id = ur.role_id WHERE ur.user_id = ? AND p.status = 1
==> Parameters: 1(Long)
<==      Total: 0
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@691459d3]
2026-01-10T19:30:47.255+08:00 DEBUG 20924 --- [nio-8081-exec-6] c.e.p.security.JwtAuthenticationFilter   : 用户 admin 认证成功
2026-01-10T19:30:47.256+08:00 DEBUG 20924 --- [nio-8081-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /teacher-info/basic/add
2026-01-10T19:30:47.268+08:00 DEBUG 20924 --- [nio-8081-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.education.platform.common.ApiResult com.education.platform.controller.TeacherInfoController.addBasicInfo(com.education.platform.entity.TeacherBasic); target is of class [com.education.platform.controller.TeacherInfoController]
2026-01-10T19:30:47.270+08:00 DEBUG 20924 --- [nio-8081-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.education.platform.common.ApiResult com.education.platform.controller.TeacherInfoController.addBasicInfo(com.education.platform.entity.TeacherBasic); target is of class [com.education.platform.controller.TeacherInfoController]
2026-01-10T19:30:47.270+08:00  INFO 20924 --- [nio-8081-exec-6] c.e.p.controller.TeacherInfoController   : === 开始新增教师基础信息 ===
2026-01-10T19:30:47.272+08:00  INFO 20924 --- [nio-8081-exec-6] c.e.p.controller.TeacherInfoController   : 接收参数: teacherId=null, userId=null, teacherNumber=T800, teacherName=最终测试
2026-01-10T19:30:47.272+08:00  INFO 20924 --- [nio-8081-exec-6] c.e.p.controller.TeacherInfoController   : 模式3: 直接创建完整的教师信息
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@552f6dd9] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1107464219 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT * FROM user WHERE username = ? AND status = 1 AND deleted = 0
==> Parameters: T800(String)
<==      Total: 0
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@552f6dd9]
2026-01-10T19:30:47.283+08:00  INFO 20924 --- [nio-8081-exec-6] c.e.p.controller.TeacherInfoController   : 准备创建User记录: User(username=T800, password=$2a$10$0FbH16apzWwgCl5/S6.FBezzcCMOkAuOkkTQk1JKo4vs02jztBsIq, realName=最终测试, idCard=, phone=0314-114514, email=, avatar=null, gender=1, birthDate=null, schoolId=null, classId=null, department=机械部, title=机械教员, status=1, lastLoginTime=null, lastLoginIp=null, deleted=0)
Creating a new SqlSession
Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff3cf48]
JDBC Connection [HikariProxyConnection@1415214630 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will be managed by Spring
==>  Preparing: SELECT * FROM user WHERE username = ? AND status = 1 AND deleted = 0
==> Parameters: T800(String)
<==      Total: 0
Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff3cf48]
Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff3cf48] from current transaction
==>  Preparing: INSERT INTO user ( username, password, real_name, id_card, phone, email, gender, department, title, status, deleted, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
==> Parameters: T800(String), $2a$10$fvlJNGd19H2Nngk9Va2YRup2BJx/9z/2xXXG.gaJzZS2Wbr08gUCK(String), 最终测试(String), (String), 0314-114514(String), (String), 1(Integer), 机械部(String), 机械教员(String), 1(Integer), 0(Integer), 2026-01-10T19:30:47.459256700(LocalDateTime), 2026-01-10T19:30:47.459256700(LocalDateTime)
<==    Updates: 1
Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff3cf48]
Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff3cf48] from current transaction
==>  Preparing: SELECT id,username,password,real_name,id_card,phone,email,avatar,gender,birth_date,school_id,class_id,department,title,status,last_login_time,last_login_ip,deleted,created_at,updated_at FROM user WHERE id=? AND deleted=0
==> Parameters: 16(Long)
<==    Columns: id, username, password, real_name, id_card, phone, email, avatar, gender, birth_date, school_id, class_id, department, title, status, last_login_time, last_login_ip, deleted, created_at, updated_at
<==        Row: 16, T800, $2a$10$fvlJNGd19H2Nngk9Va2YRup2BJx/9z/2xXXG.gaJzZS2Wbr08gUCK, 最终测试, , 0314-114514, , null, 1, null, null, null, 机械部, 机械教员, 1, null, null, 0, 2026-01-10 19:30:47.0, 2026-01-10 19:30:47.0
<==      Total: 1
Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff3cf48]
Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff3cf48] from current transaction
==>  Preparing: SELECT id FROM role WHERE role_code = ?
==> Parameters: TEACHER(String)
<==    Columns: id
<==        Row: 2
<==      Total: 1
Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff3cf48]
Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff3cf48] from current transaction
==>  Preparing: INSERT IGNORE INTO user_role (user_id, role_id) VALUES (?, ?)
==> Parameters: 16(Long), 2(Long)
<==    Updates: 1
Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff3cf48]
Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff3cf48] from current transaction
==>  Preparing: INSERT INTO teacher ( user_id, teacher_number, title, subject, hire_date, status, deleted, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ? )
==> Parameters: 16(Long), T16(String), 机械教员(String), 机械部(String), 2026-01-10(LocalDate), 1(Integer), 0(Integer), 2026-01-10T19:30:47.484869900(LocalDateTime), 2026-01-10T19:30:47.484869900(LocalDateTime)
<==    Updates: 1
Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff3cf48]
Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff3cf48] from current transaction
==>  Preparing: INSERT INTO teacher_basic ( user_id, teacher_id, teacher_name, teacher_number, phone, email, department, title, status, deleted, created_at, updated_at ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )
==> Parameters: 16(Long), 14(Long), 最终测试(String), T16(String), 0314-114514(String), (String), 机械部(String), 机械教员(String), 1(Integer), 0(Integer), 2026-01-10T19:30:47.497883400(LocalDateTime), 2026-01-10T19:30:47.497883400(LocalDateTime)
<==    Updates: 1
Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff3cf48]
Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff3cf48]
Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff3cf48]
Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff3cf48]
2026-01-10T19:30:47.528+08:00  INFO 20924 --- [nio-8081-exec-6] c.e.p.controller.TeacherInfoController   : User记录创建成功，ID: 16
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@421abb98] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1031091040 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT id,user_id,teacher_number,title,subject,hire_date,status,deleted,created_at,updated_at FROM teacher WHERE deleted=0 AND (user_id = ? AND deleted = ?)
==> Parameters: 16(Long), 0(Integer)
<==    Columns: id, user_id, teacher_number, title, subject, hire_date, status, deleted, created_at, updated_at
<==        Row: 14, 16, T16, 机械教员, 机械部, 2026-01-10, 1, 0, 2026-01-10 19:30:47.0, 2026-01-10 19:30:47.0
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@421abb98]
2026-01-10T19:30:47.546+08:00  INFO 20924 --- [nio-8081-exec-6] c.e.p.controller.TeacherInfoController   : 找到Teacher记录，ID: 14
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@778158c3] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@472089822 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT id,user_id,teacher_id,teacher_name,teacher_number,gender,birth_date,ethnicity,native_place,id_card,phone,email,address,school_id,department,position,title,hire_date,status,photo_url,work_photo_url,signature_url,role_type,remarks,deleted,created_at,updated_at FROM teacher_basic WHERE deleted=0 AND (teacher_id = ? AND deleted = ?)
==> Parameters: 14(Long), 0(Integer)
<==    Columns: id, user_id, teacher_id, teacher_name, teacher_number, gender, birth_date, ethnicity, native_place, id_card, phone, email, address, school_id, department, position, title, hire_date, status, photo_url, work_photo_url, signature_url, role_type, remarks, deleted, created_at, updated_at
<==        Row: 15, 16, 14, 最终测试, T16, null, null, null, null, null, 0314-114514, , null, null, 机械部, null, 机械教员, null, 1, null, null, null, null, null, 0, 2026-01-10 19:30:47.0, 2026-01-10 19:30:47.0
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@778158c3]
2026-01-10T19:30:47.558+08:00 ERROR 20924 --- [nio-8081-exec-6] c.e.p.controller.TeacherInfoController   : teacher_basic表中已存在teacher_id=14的记录
2026-01-10T19:30:51.988+08:00 DEBUG 20924 --- [nio-8081-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /teacher-info/basic/add
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79cb0907] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1594486130 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT * FROM user WHERE username = ? AND status = 1 AND deleted = 0
==> Parameters: admin(String)
<==    Columns: id, username, password, real_name, id_card, phone, email, avatar, gender, birth_date, school_id, department, title, status, last_login_time, last_login_ip, deleted, created_at, updated_at, class_id
<==        Row: 1, admin, $2a$10$0FbH16apzWwgCl5/S6.FBezzcCMOkAuOkkTQk1JKo4vs02jztBsIq, 系统管理员, null, 13800138000, admin@education.com, null, null, null, null, null, null, 1, 2026-01-10 19:30:05.0, null, 0, 2026-01-09 09:59:28.0, 2026-01-09 09:59:28.0, null
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79cb0907]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f58176] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@406998205 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT r.role_code FROM role r INNER JOIN user_role ur ON r.id = ur.role_id WHERE ur.user_id = ?
==> Parameters: 1(Long)
<==    Columns: role_code
<==        Row: ADMIN
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f58176]
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1544df11] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1007878910 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT DISTINCT p.permission_code FROM permission p INNER JOIN role_permission rp ON p.id = rp.permission_id INNER JOIN user_role ur ON rp.role_id = ur.role_id WHERE ur.user_id = ? AND p.status = 1
==> Parameters: 1(Long)
<==      Total: 0
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1544df11]
2026-01-10T19:30:52.013+08:00 DEBUG 20924 --- [nio-8081-exec-7] c.e.p.security.JwtAuthenticationFilter   : 用户 admin 认证成功
2026-01-10T19:30:52.014+08:00 DEBUG 20924 --- [nio-8081-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /teacher-info/basic/add
2026-01-10T19:30:52.016+08:00 DEBUG 20924 --- [nio-8081-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.education.platform.common.ApiResult com.education.platform.controller.TeacherInfoController.addBasicInfo(com.education.platform.entity.TeacherBasic); target is of class [com.education.platform.controller.TeacherInfoController]
2026-01-10T19:30:52.017+08:00 DEBUG 20924 --- [nio-8081-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.education.platform.common.ApiResult com.education.platform.controller.TeacherInfoController.addBasicInfo(com.education.platform.entity.TeacherBasic); target is of class [com.education.platform.controller.TeacherInfoController]
2026-01-10T19:30:52.018+08:00  INFO 20924 --- [nio-8081-exec-7] c.e.p.controller.TeacherInfoController   : === 开始新增教师基础信息 ===
2026-01-10T19:30:52.018+08:00  INFO 20924 --- [nio-8081-exec-7] c.e.p.controller.TeacherInfoController   : 接收参数: teacherId=null, userId=null, teacherNumber=T800, teacherName=最终测试
2026-01-10T19:30:52.019+08:00  INFO 20924 --- [nio-8081-exec-7] c.e.p.controller.TeacherInfoController   : 模式3: 直接创建完整的教师信息
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c01b598] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@252594526 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT * FROM user WHERE username = ? AND status = 1 AND deleted = 0
==> Parameters: T800(String)
<==    Columns: id, username, password, real_name, id_card, phone, email, avatar, gender, birth_date, school_id, department, title, status, last_login_time, last_login_ip, deleted, created_at, updated_at, class_id
<==        Row: 16, T800, $2a$10$fvlJNGd19H2Nngk9Va2YRup2BJx/9z/2xXXG.gaJzZS2Wbr08gUCK, 最终测试, , 0314-114514, , null, 1, null, null, 机械部, 机械教员, 1, null, null, 0, 2026-01-10 19:30:47.0, 2026-01-10 19:30:47.0, null
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c01b598]
2026-01-10T19:30:52.026+08:00  WARN 20924 --- [nio-8081-exec-7] c.e.p.controller.TeacherInfoController   : 用户名T800已存在，ID=16
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25443b24] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@2076267033 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT id,user_id,teacher_number,title,subject,hire_date,status,deleted,created_at,updated_at FROM teacher WHERE deleted=0 AND (user_id = ? AND deleted = ?)
==> Parameters: 16(Long), 0(Integer)
<==    Columns: id, user_id, teacher_number, title, subject, hire_date, status, deleted, created_at, updated_at
<==        Row: 14, 16, T16, 机械教员, 机械部, 2026-01-10, 1, 0, 2026-01-10 19:30:47.0, 2026-01-10 19:30:47.0
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25443b24]
2026-01-10T19:30:52.038+08:00  WARN 20924 --- [nio-8081-exec-7] c.e.p.controller.TeacherInfoController   : 用户16已有Teacher记录，ID=14
Creating a new SqlSession
SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c24312d] was not registered for synchronization because synchronization is not active
JDBC Connection [HikariProxyConnection@1265527361 wrapping com.mysql.jdbc.JDBC4Connection@6d7b5d00] will not be managed by Spring
==>  Preparing: SELECT id,user_id,teacher_id,teacher_name,teacher_number,gender,birth_date,ethnicity,native_place,id_card,phone,email,address,school_id,department,position,title,hire_date,status,photo_url,work_photo_url,signature_url,role_type,remarks,deleted,created_at,updated_at FROM teacher_basic WHERE deleted=0 AND (teacher_id = ? AND deleted = ?)
==> Parameters: 14(Long), 0(Integer)
<==    Columns: id, user_id, teacher_id, teacher_name, teacher_number, gender, birth_date, ethnicity, native_place, id_card, phone, email, address, school_id, department, position, title, hire_date, status, photo_url, work_photo_url, signature_url, role_type, remarks, deleted, created_at, updated_at
<==        Row: 15, 16, 14, 最终测试, T16, null, null, null, null, null, 0314-114514, , null, null, 机械部, null, 机械教员, null, 1, null, null, null, null, null, 0, 2026-01-10 19:30:47.0, 2026-01-10 19:30:47.0
<==      Total: 1
Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c24312d]
2026-01-10T19:30:52.049+08:00 ERROR 20924 --- [nio-8081-exec-7] c.e.p.controller.TeacherInfoController   : teacher_basic表中已存在teacher_id=14的记录


修改代码